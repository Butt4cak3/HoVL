{"version":3,"sources":["../src/scene.ts","../src/vector.ts","../src/shapes.ts","circles/main.ts"],"names":[],"mappings":";AAUA,MAAM;IAiBJ,YAAY,MAAyB;ACpBvC,MAAM,EDMM,WAAM,GAAY,CCNP,CDMS,ACNS,CDMR,CCNU,CAAU;IACnD,EAAE,CAAC,CDQK,ACRJ,OAAO,CAAC,KDQI,ACRC,GDQY,EAAE,CAAC,EAAE,ACRT,CDQU,ACRT,CAAC,CDQU,ACRT,CDQU,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;AEhB7E,OAAO,CF4BH,ACnBA,CCTK,GF4BD,CAAC,CCnBC,CCTK,ADSJ,ECTM,ADSJ,CAAC,CDmBC,CCnBC,CAAC,CDmBC,CCnBC,CAAC,IDmBI,ACnBA,CDmBC,GCnBG,CAAC,CAAC,CAAC,CAAC,CCTK,ADSJ,CAAC,CAAC,CAAC,EAAE,CAAC;ACDvC,IDEE,CAAC,CCFG,EFqBF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AG7B9D,IDeE,ADLE,GEVG,CH+BH,ACrBI,CAAC,AEVA,CFUC,IDqBA,AG/BI,EDgBV,AChBY,CH+BH,GAAG,CEfC,EACb,EAAE,CFcgB,CAAC,OEdR,GFckB,AEdf,CFcgB,IAAI,CAAC,AEdf,ACjBW,CH+BK,AEdf,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAgB;AChBhF,OAAO,CH+BH,AEbA,ADRA,CEVK,CH+BH,CAAC,CAAC,AEbA,CAAC,CDRC,CDqBC,AG/BI,CH+BH,CAAC,AG/BI,CH+BH,AEbA,GAAG,KAAK,CAAC,MDRP,CAAC,EAAG,SEViB;AAErC,IFSE,CAAC,GCSC,IFYE,AEZE,CAAC,GFYC,CAAC,CG9BQ,IDkBD,EFYA,CEZG,EFYA,AG9BM,GH8BH,CAAC,AEZE,CAAC,AClBI,SDkBK,CAAC,CAAC;ADRvC,CAAC,GETC,IH8BE,AEZA,CFYC,GEZG,CAAC,GClBY,GDkBN,GAAG,AClB4B,MDkBtB,CAAC;ADPzB,MAAM,EDmBA,AEXF,AClBA,IH6BM,AEXF,CFWG,AEXF,AClBA,CH6BG,AG7BF,IDkBI,EDRM,AEVJ,CDkBC,AClBA,CAAC,CFUa,EAAE,ECQV,CAAC,ADRoB,KCQf,CAAC,CAAC;IAC7B,ADRA,CCQC,GCjBC,EFSI,CAAC,CDmBH,AG5BE,CAAC,CFSG,CAAC,CAAC,EDmBF,CCnBK,AETF,GH4BC,ACnBI,AETF,CFSG,CAAC,GDmBD,ACnBI,CDmBH,ECnBM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,IDmBA,CAAC,CAAC;AClBzC,CAAC,GCSQ,IFUL,AEVS,CFUR,AEVS,GClBR,IDkByC,AClBrC,MAAM,CAAC,CAAC,EAAE,SAAS,EAAE;AFW/B,MAAM,EDmBF,AEXA,IFWI,CAAC,EEXE,CAAC,AClBJ,IDkBQ,EAAE,CAAC,ADRI,CDmBH,ACnBY,CDmBX,AG7BJ,CH6BK,CG7BH,CH6BK,CAAC,AG7BJ,CAAC,CH6BK,CAAC,AG7BJ,CH6BK,AG7BJ,CH6BK,CG7BH,CAAC,EAAE,CAAC,EAAE;IH8B/B,ACnBA,CDmBC,GEXC,EDRI,CAAC,EEVF,CAAC,CDkBG,ADRE,CCQD,ADRE,IAAI,CAAC,GAAG,CCQD,ADRE,CCQD,ADRE,EAAE,CAAC,CCQD,ADRE,CCQD,ADRE,CAAC,QCQM,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;ADP1D,CAAC,GDFC,IAAW,AEUT,IClBE,CHQY,EEUP,CAAC,AClBF,MDkBQ,AClBF,CDkBG,AClBF,CAAC,EAAE,CDkBG,CAAC,MAAM,CAAC,AClBF,CDkBG,CClBD;AFY/B,MAAM,EDHF,AEUA,MFVM,CAAC,AEUA,CAAC,AClBJ,GHQO,CAAC,ACGI,CCOH,CAAC,CDPa,EAAE,AEXhB,CHQK,AEUA,CFVC,AEUA,AClBJ,CFWyB,CEXvB,CAAC,EHQM,AEUA,AClBJ,CHQK,AEUA,AClBJ,CDkBK,CClBH,CDkBK,AClBJ,EAAE,CAAC,CDkBK,CAAC,AClBJ,KDkBS,CAAC,CAAC,CAAC,CAAC;IFT5C,ACGA,CDHC,GEUC,EDPI,CAAC,CCOD,CAAC,ADPE,AEXJ,CFWK,AEXJ,EFWM,GAAG,CAAC,CAAC,GAAG,CCOD,CAAC,CDPG,CAAC,CAAC,EAAE,CAAC,CCOD,CAAC,ADPE,CCOD,EDPI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;AAChD,CAAC,GDFC,IAAW,AEST,CClBC,CAAC,IHSa,CESR,CAAC,OAAO,EAAE,CAAC;ADLtB,ICME,AClBA,CDkBC,AClBA,CFYG,EDHF,MAAM,CAAC,IAAI,CAAC,ACGI,GAAW,EAAE,CDHX,CAAC,CCGqB,KDHf,CAAC;CEY7B,GFXC,ACGA,AEXU,CHQT,KCGK,AEXU,CFWT,AEXU,EFWR,CAAC,CEXmB,CFWjB,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;ACUhD,ADTA,CAAC,GDYQ,EEHH,ECpBF,IAAI,CAAC,IHuBa,CAAC,CEHH,ACpBL,CAAC,CAAC,CAAC,CHuBkB,AGvBjB,EHuBmB,GEHV,GFGwB,CGvBxB,CDoBK,ACpBJ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AFaxD,ICUE,EDVI,EDWF,AGvBA,IHuBI,AGvBA,CHuBC,AGvBA,GDsBK,GFCC,AGvBA,CHuBC,ACXI,AEZJ,CAAC,CDsBW,ACtBV,CFYa,AEZZ,CDsBW,CFCT,ACXY,GDWT,ACXoB,CCUD,EAAE,CCtBjB,CHuBC,AGvBA,CHuBC,AEDgC,ACtBhC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IFatD,AEZA,CAAC,GHuBC,AEDA,EDVI,CAAC,CDWD,CAAC,AEDA,ADVE,CCUD,ADVE,EAAE,GDWC,AEDA,ADVE,CDWD,ACXE,CCUD,ADVE,GCUC,ADVE,CCUD,CFCC,AEDA,CDVG,EDWA,ACXE,CAAC,EAAE,GDWC,ACXE,CDWD,ACXE,CAAC,GAAG,GAAG,EAAE,CAAC;AAC5C,CAAC,AEZA,OHuBG,AEDA,IFCI,AEDA,CFCC,AEDA,MAAM,GAAG,EFCE,GAAG,CEDC,CAAC,EFCE,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;ACT9D,AEZA,IDqBE,CAAC,CDTG,EDWF,AGvBI,CAAC,GHuBD,CAAC,OCXW,GAAW,CDWX,CAAC,ACXY,AEZR,CAAC,EFYkB,CDWnB,CAAC,QAAQ,CAAC,CAAC,EAAE,EGvBM,EHuBF,AGvBI,CHuBH,EGvBM,EAAE,IHuBA,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC1E,AEDU,ADVV,AEZA,CHuBC,KCXK,AEZA,CFYC,EAAE,CAAC,ECUY,ADVV,AEZA,CDsBW,EDVR,AEZA,CFYC,CAAC,GCUuC,ADVpC,GAAG,AEZA,CAAC,CFYC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,EEZE,CFYC,AEZA,EFYE,CAAC,KEZK,CAAsB,CAAC;AFaxE,CAAC,GDYQ,AGxBP,IDsBE,ECtBI,KHwBY,AEFT,ACtBE,CHwBQ,AEFT,CFEkB,CGxBd,CHwBgB,CAAS,EAAE,AGxBvB,GDsBC,EFEmC,AEFjC,CAAC,MCtBQ,CAAC,MAAM,CAAC,CAAC;IAEvC,IHuBE,AEFA,CCrBG,CAAC,IHuBE,CEFC,CAAC,GFEG,AEFA,CAAC,CAAC,CFEC,CEFC,ACrBE,CDqBD,ACrBE,EHuBA,AEFA,CFEC,AGvBE,EAAE,CDqBD,CAAC,CCrBG,CHuBD,AGvBE,CHuBD,AGvBE,GDqBC,EFEE,AEFA,CAAC,EFEE,AEFA,IAAI,CFEC,AEFA,CFEC,CEFC,GAAG,CAAC,CAAC,CAAC;ICpBjD,IHuBE,AEFA,CCrBG,CAAC,IHuBE,CEFC,CAAC,IFEI,CGvBG,CAAC,CHuBD,AGvBE,EDqBA,ACrBE,CAAC,EHuBA,AEFA,ACrBE,EAAE,CHuBD,AGvBE,CDqBD,ACrBE,CDqBD,EFEE,CAAC,EEFE,CAAC,QFEQ,CAAC;IGrB1C,IHuBE,AEHA,CCpBG,CAAC,EHuBA,CAAC,EEHE,ACpBE,CDoBD,CCpBG,CAAC,EDoBA,CFGC,CEHC,CAAC,CFGC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;AGtBnD,CAAC,CAAC,CAAC,CDoBD,CAAC,GFGC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;CEFzE,GFGC,CAAC;AEDH,IFGS,EEHH,GFGQ,QEHI,SAAQ,KAAK;IAK7B,IFDE,MAAM,EECI,CAAS,EFDR,AECU,CAAS,EFDhB,AECkB,KAAa,EAAE,IFDtB,CAAC,AECkC,EAAE,CFDjC,EAAE,AECgD,CFD/C;QAChC,AECA,IFDI,CECC,CAAC,EFDE,GAAG,AECA,EAAE,GFDG,AECA,CFDC,AECA,CAAC;QFClB,AEAA,IAAI,CAAC,CFAC,AEAA,GAAG,EFAE,GAAG,CAAC,AEAA,CAAC,CAAC,CFAS,AEAR,CAAC,CFAS,EAAE;QEC9B,IFAE,AEAE,CAAC,CAAC,GAAG,CFAD,IAAI,CEAG,CAAC,CFAD,AEAE,CAAC,CAAC,CFAD,GAAG,KAAK,CAAC;QEC3B,IFAE,AEAE,CAAC,KFAG,AEAE,EFAA,CEAG,EFAA,GAAG,AEAE,CAAC,EFAA,IAAI,CAAC;IEC1B,CAAC,OFAG,IAAI,GAAG,GAAG,CAAC;IEEL,QFDN,IAAI,AECc,CFDb,AECc,KFDT,CAAC,CECyC,GFDrC,EAAE,EAAE,CAAC,CAAC;QEEvB,IFDE,GECK,CAAC,EFDA,CAAC,MECQ,EAAE,CAAC,YFDU,CAAC,KAAK,CAAC,CAAC;QACtC,AECA,CFDC,CAAC,KECK,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;QFCjC,AEAA,MFAM,CAAC,AEAA,CAAC,SAAS,GAAG,IAAI,CAAC,GFAG,CAAC,CEAC,CAAC,GFAG,CAAC,CAAC;IACtC,CAAC,GEAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IFE9B,IEDL,CFCU,MEDH,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QFEnC,AEDA,IFCI,CAAC,EEDE,CAAC,IFCI,CAAC,CEDC,EAAE,CAAC,KFCK,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACxD,AEDA,CFCC,AEDA;CACF,GFES,KAAK,CAAC,IAAY,EAAE,EAAU;QACpC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,EAAE,EAAE,GAAG,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAIS,MAAM;QACd,IAAI,CAAC,KAAK,EAAE,CAAC;QAEb,GAAG,CAAC,CAAC,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,CAAC;IACH,CAAC;CACF","file":"87899fa4155080196a0bd94e6581e8d1.map","sourcesContent":["import { Shape } from \"hovl/shapes\";\n\nexport interface Viewport {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  scale: number;\n}\n\nexport abstract class Scene {\n  public readonly context: CanvasRenderingContext2D;\n\n  protected shapes: Shape[] = [];\n\n  private readonly canvas: HTMLCanvasElement;\n  private viewport: Viewport = { x: 0, y: 0, width: 0, height: 0, scale: 1 };\n  private aspectRatio: number;\n\n  public get width(): number {\n    return this.canvas.width;\n  }\n\n  public get height(): number {\n    return this.canvas.height;\n  }\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    this.aspectRatio = this.canvas.width / this.canvas.height;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (ctx) {\n      this.context = ctx;\n    } else {\n      throw new Error(\"No canvas found\");\n    }\n\n    this.setViewport(0, 0, 1);\n  }\n\n  public setCanvasSize(width: number, height: number) {\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.aspectRatio = this.canvas.width / this.canvas.height;\n\n    this.setViewport(this.viewport.x, this.viewport.y, this.viewport.width);\n  }\n\n  public setViewport(x: number, y: number, width: number) {\n    const scale = this.canvas.width / width;\n    const height = width / this.aspectRatio;\n\n    this.viewport = { x, y, width, height, scale };\n    this.context.setTransform(scale, 0, 0, scale, -x * scale, -y * scale);\n  }\n\n  public start(): void {\n    const start = performance.now();\n    let last = start;\n\n    const frame = (now: number) => {\n      const time = now - start;\n      const dt = now - last;\n      last = now;\n      this.frame(time, dt);\n      window.requestAnimationFrame(frame);\n    };\n\n    window.requestAnimationFrame(frame);\n  }\n\n  public clear(): void {\n    this.context.clearRect(0, 0, this.width, this.height);\n  }\n\n  private frame(time: number, dt: number): void {\n    this.update(time / 1000, dt / 1000);\n    this.render();\n  }\n\n  protected abstract update(time: number, dt: number): void;\n\n  protected render(): void {\n    this.clear();\n\n    for (const shape of this.shapes) {\n      shape.draw(this.context);\n    }\n  }\n}\n","export interface Vector {\n  x: number;\n  y: number;\n}\n\nexport function Vector(value: Vector | number): Vector;\nexport function Vector(x: number, y: number): Vector;\nexport function Vector(x: number | Vector, y?: number): Vector {\n  if (typeof x === \"number\") {\n    return { x, y: y != null ? y : x };\n  } else {\n    return { ...x };\n  }\n}\n\nexport function dot(lhs: Vector, rhs: Vector): number {\n  return lhs.x * rhs.x + lhs.y * rhs.y;\n}\n\nexport function length(v: Vector): number {\n  return Math.sqrt(dot(v, v));\n}\n\nexport function add(lhs: Vector, rhs: Vector): Vector {\n  return { x: lhs.x + rhs.x, y: lhs.y + rhs.y };\n}\n\nexport function sub(lhs: Vector, rhs: Vector): Vector {\n  return { x: lhs.x - rhs.x, y: lhs.y - rhs.y };\n}\n\nexport function mul(lhs: Vector, rhs: number): Vector {\n  return { x: lhs.x * rhs, y: lhs.y * rhs };\n}\n\nexport function div(lhs: Vector, rhs: number): Vector {\n  return { x: lhs.x / rhs, y: lhs.y / rhs };\n}\n","import { Vector } from \"hovl/vector\";\n\nexport interface Trs {\n  translate: Vector;\n  rotate: number;\n  scale: Vector | number;\n}\n\nexport abstract class Shape {\n  public color: string;\n\n  public translate: Vector;\n  public rotate: number;\n  public scale: Vector;\n\n  constructor(\n    color: string,\n    { translate = Vector(0, 0), rotate = 0, scale = Vector(1, 1) }: Partial<Trs>\n  ) {\n    this.color = color;\n\n    this.translate = Vector(translate);\n    this.rotate = rotate;\n    this.scale = Vector(scale);\n  }\n\n  public draw(context: CanvasRenderingContext2D): void {\n    context.save();\n    context.translate(this.translate.x, this.translate.y);\n    context.rotate(this.rotate);\n    context.scale(this.scale.x, this.scale.y);\n    this.drawInternal(context);\n    context.restore();\n  }\n\n  protected abstract drawInternal(context: CanvasRenderingContext2D): void;\n}\n\nexport class Circle extends Shape {\n  public radius: number;\n\n  constructor(radius: number, color: string, trs: Partial<Trs>) {\n    super(color, trs);\n    this.radius = radius;\n  }\n\n  protected drawInternal(context: CanvasRenderingContext2D): void {\n    context.beginPath();\n    context.arc(0, 0, this.radius, 0, Math.PI * 2);\n    context.fillStyle = this.color;\n    context.fill();\n  }\n}\n\nexport class Line extends Shape {\n  public a: Vector;\n  public b: Vector;\n  public width: number;\n\n  constructor(a: Vector, b: Vector, width: number, color: string, trs: Partial<Trs>) {\n    super(color, trs);\n    this.a = Vector(a);\n    this.b = Vector(b);\n    this.width = width;\n  }\n\n  protected drawInternal(context: CanvasRenderingContext2D): void {\n    context.beginPath();\n    context.strokeStyle = this.color;\n    context.lineWidth = this.width;\n    context.moveTo(this.a.x, this.a.y);\n    context.lineTo(this.b.x, this.b.y);\n    context.stroke();\n  }\n}\n","import { Scene } from \"hovl/scene\";\nimport { Circle } from \"hovl/shapes\";\n\nclass CirclesScene extends Scene {\n  public constructor(canvas: HTMLCanvasElement) {\n    super(canvas);\n\n    this.shapes = [\n      new Circle(1, \"#00FF00\", {\n        translate: { x: 2, y: 2 }\n      }),\n      new Circle(1, \"#0000FF\", {\n        translate: { x: 8, y: 8 }\n      })\n    ];\n  }\n\n  protected update(time: number): void {\n    this.shapes[0].translate.x = 5 + Math.sin(time) * 3;\n    this.shapes[1].translate.y = 5 + Math.sin(time) * 3;\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n  const scene = new CirclesScene(canvas);\n\n  scene.setCanvasSize(600, 600);\n  scene.setViewport(0, 0, 10);\n\n  scene.start();\n});\n"]}